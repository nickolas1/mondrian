(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],d=0,u=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/mondrian/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var h=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"36c2":function(e,t,r){},"3ab9":function(e,t,r){"use strict";var a=r("36c2"),n=r.n(a);n.a},"3fd6":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),n=r("bb71"),s=r("7496"),i=r("a523"),o=r("a722"),l=r("0e8f"),c=r("ba0d"),h=r("2677"),d=r("6b53"),u=r("0d3d");r("da64");a["a"].use(n["a"],{components:{VApp:s["a"],VContainer:i["a"],VLayout:o["a"],VFlex:l["a"],VSlider:c["a"],VTextField:h["a"],VResponsive:d["a"]},directives:{Resize:u["a"]}});var g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-container",{attrs:{fluid:"","grid-list-md":""}},[r("v-layout",{attrs:{row:"","justify-center":"","align-end":"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:"","offset-md3":"",xl8:"","offset-xl2":""}},[r("v-responsive",{attrs:{"aspect-ratio":1}},[r("Mondrian",{attrs:{"rng-seed":e.rngSeed,"lines-base":e.linesBase,"color-percentage":e.colorPercentage,"blue-percentage":e.bluePercentage,"red-percentage":e.redPercentage,"yellow-percentage":e.yellowPercentage,"muted-percentage":e.mutedPercentage}})],1)],1),r("v-flex",{attrs:{xs10:"",sm8:"",md3:"","offset-md0":"",xl2:"","offset-xl0":""}},[r("Describer",{attrs:{description:e.description}})],1)],1),r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-flex",{attrs:{xs10:""}},[r("Parameterizer",{attrs:{"rng-seed":e.rngSeed,"lines-base":e.linesBase,"color-percentage":e.colorPercentage,"blue-percentage":e.bluePercentage,"red-percentage":e.redPercentage,"yellow-percentage":e.yellowPercentage,"muted-percentage":e.mutedPercentage},on:{"set-param":function(t){e.setProperty(t)}}})],1)],1)],1)],1)},f=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.initialized?r("div",{directives:[{name:"resize",rawName:"v-resize",value:e.drawEverything,expression:"drawEverything"}],staticClass:"svg-container"},[r("svg",{attrs:{width:e.width,height:e.height,id:"mondrian-image"}},[r("g",{attrs:{mask:"url(#texture)"}},[e._l(e.rectangles,(function(e,t){return r("rect",{key:t,class:e.colorClass,attrs:{x:e.x,y:e.y,width:e.width,height:e.height}})})),e._l(e.horizontals,(function(e){return r("line",{key:e.id,staticStyle:{filter:"url(#displacementFilter)"},attrs:{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y,"stroke-width":e.width}})})),e._l(e.verticals,(function(e){return r("line",{key:e.id,staticStyle:{filter:"url(#displacementFilter)"},attrs:{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y,"stroke-width":e.width}})}))],2),r("defs",[r("pattern",{attrs:{x:"0",y:"0",width:"256",height:"256",id:"texture-pattern",patternUnits:"userSpaceOnUse"}},[r("image",{attrs:{"xlink:href":"img/textile.png",width:"256",height:"256"}})]),r("mask",{attrs:{id:"texture"}},[r("rect",{attrs:{height:e.height,width:e.width,fill:"url(#texture-pattern)"}})]),r("filter",{attrs:{x:"0",y:"0",height:e.height,width:e.width,id:"displacementFilter",filterUnits:"userSpaceOnUse"}},[r("feTurbulence",{attrs:{type:"turbulence",baseFrequency:"1.5",numOctaves:"2",result:"turbulence"}}),r("feDisplacementMap",{attrs:{in2:"turbulence",in:"SourceGraphic",scale:"1",xChannelSelector:"R",yChannelSelector:"G"}})],1)])])]):e._e()},m=[];function v(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}}function x(e,t=Math.random){var r=Math.exp(-e),a=0,n=1;do{a++,n*=t()}while(n>r);return a-1}var y={name:"Mondrian",props:{rngSeed:Number,linesBase:Number,colorPercentage:Number,redPercentage:Number,bluePercentage:Number,yellowPercentage:Number,mutedPercentage:Number},data(){return{width:100,height:100,horizontals:[],verticals:[],rectangles:[],rand:void 0,initialized:!1}},watch:{rngSeed:function(){this.drawEverything()},linesBase:function(){this.drawEverything()},colorPercentage:function(){this.drawEverything()},redPercentage:function(){this.drawEverything()},bluePercentage:function(){this.drawEverything()},yellowPercentage:function(){this.drawEverything()}},methods:{drawEverything(){this.rand=v(this.rngSeed),this.getSvgWidth(),this.getHorizontals(),this.getVerticals(),this.adjustEndpoints(),this.getRectangles(),this.scaleLinesAndRectangles(),this.initialized=!0},getSvgWidth(){this.width=Math.min(this.$parent.$el.offsetHeight,this.$parent.$el.offsetWidth),this.height=this.width},getLines(e){const t=Math.floor(5*this.rand())+1;let r=[];r=[Math.max(1,x(t,this.rand))];for(let n=1;n<e+1;n++)r[n]=r[n-1]+x(t,this.rand);const a=1/r[e];r=r.map(e=>e*a);do{1===r.length?r[0]*=this.rand():r.pop()}while(r[r.length-1]>=1);return r},getHorizontals(){const e=this.getLines(this.linesBase),t=8+x(2,this.rand);this.horizontals=e.map((e,r)=>{return{id:`horizontal-${r}`,width:t+x(1,this.rand),start:{x:0,y:e},end:{x:1,y:e}}})},getVerticals(){const e=this.getLines(this.linesBase),t=8+x(2,this.rand);this.verticals=e.map((e,r)=>{return{id:`vertical-${r}`,width:t+x(1,this.rand),start:{x:e,y:0},end:{x:e,y:1}}})},adjustEndpoints(){this.horizontals.forEach(e=>{const t=Math.min(x(1,this.rand),this.verticals.length-2),r=Math.max(t+1,this.verticals.length-1-x(1,this.rand));t>0&&this.verticals[t].start.y<e.start.y&&this.verticals[t].end.y>e.start.y&&(e.start.x=this.verticals[t].start.x),r<this.verticals.length-1&&this.verticals[r].start.y<e.start.y&&this.verticals[r].end.y>e.start.y&&(e.end.x=this.verticals[r].start.x)}),this.verticals.forEach(e=>{const t=Math.min(x(1,this.rand),this.horizontals.length-2),r=Math.max(t+1,this.horizontals.length-1-x(1,this.rand));let a=!0;for(let n=0;n<=t;n++)a=a&&this.horizontals[n].start.x<e.start.x&&this.horizontals[n].end.x>e.start.x;t>0&&a&&(e.start.y=this.horizontals[t].start.y),a=!0;for(let n=this.horizontals.length-1;n>=r;n--)a=a&&this.horizontals[n].start.x<e.start.x&&this.horizontals[n].end.x>e.start.x;r<this.horizontals.length-1&&a&&(e.end.y=this.horizontals[r].start.y)})},getRectangles(){const e=Number.EPSILON,t=new Map,r=[...this.verticals.map(t=>t.start.x-e),1-e],a=[...this.horizontals.map(t=>t.start.y-e),1-e];r.forEach(e=>{a.forEach(r=>{const a=this.getBoundingRectangle(e,r);t.set(`${a.x}-${a.y}`,a)})});const n=Array.from(t.values());n.forEach(e=>{e.colorClass=this.getColor()}),this.rectangles=n},scaleLinesAndRectangles(){this.verticals.forEach(e=>e.width*=this.width/512),this.horizontals.forEach(e=>e.width*=this.height/512),[...this.verticals,...this.horizontals].forEach(e=>{e.start.x*=this.width,e.end.x*=this.width,e.start.y*=this.height,e.end.y*=this.height}),this.rectangles.forEach(e=>{e.x*=this.width,e.y*=this.height,e.width*=this.width,e.height*=this.height})},getColor(){let e=["white-base","white-light","white-dark"];if(this.rand()<this.colorPercentage/100){let t=this.rand();e=t<this.redPercentage/100?["red-base","red-dark","red-light"]:t<(this.redPercentage+this.bluePercentage)/100?["blue-base","blue-dark","blue-light"]:t<(this.redPercentage+this.bluePercentage+this.yellowPercentage)/100?["yellow-base","yellow-dark","yellow-light"]:["black-base"]}return e[Math.floor(this.rand()*e.length)]},getBoundingRectangle(e,t){let r=0,a=void 0,n=0,s=void 0;return this.verticals.forEach(n=>{n.start.x<e&&n.start.y<t&&n.end.y>t&&(r=n.start.x),!a&&n.start.x>e&&n.start.y<t&&n.end.y>t&&(a=n.start.x)}),this.horizontals.forEach(r=>{r.start.y<t&&r.start.x<e&&r.end.x>e&&(n=r.start.y),!s&&r.start.y>t&&r.start.x<e&&r.end.x>e&&(s=r.start.y)}),a||(a=this.width),s||(s=this.height),{x:r,y:n,width:a-r,height:s-n}}}},w=y,b=(r("7690"),r("2877")),P=Object(b["a"])(w,p,m,!1,null,"132c5256",null),S=P.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"parameterizer",attrs:{fluid:"","grid-list-xs":""}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{staticClass:"parameters-title pt-4",attrs:{xs12:"","d-flex":"","justify-center":""}},[e._v("\n            Variations on this composition\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Approximate No. of lines\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-slider",{attrs:{min:"1",max:"15",label:""+e.linesBase},model:{value:e.linesInterface,callback:function(t){e.linesInterface=t},expression:"linesInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Based on the fraction of the whole of the moon\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Chance a region is colorful\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-slider",{attrs:{label:""+e.colorPercentage},model:{value:e.colorInterface,callback:function(t){e.colorInterface=t},expression:"colorInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Recent snow reduces the chance\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Chances of blue\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-slider",{attrs:{label:""+e.bluePercentage},model:{value:e.blueInterface,callback:function(t){e.blueInterface=t},expression:"blueInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Active precipitation increases the blue\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Chances of red\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-slider",{attrs:{label:""+e.redPercentage},model:{value:e.redInterface,callback:function(t){e.redInterface=t},expression:"redInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Modified by the temperature difference to 75F; hotter means more red\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Chances of yellow\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-slider",{attrs:{label:""+e.yellowPercentage},model:{value:e.yellowInterface,callback:function(t){e.yellowInterface=t},expression:"yellowInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Cloudy means less yellow\n        ")])],1),r("v-layout",{attrs:{row:"","d-flex":"","align-center":""}},[r("v-flex",{attrs:{xs3:"","d-flex":"","justify-end":""}},[e._v("\n            Random number generator seed\n        ")]),r("v-flex",{attrs:{xs6:""}},[r("v-text-field",{attrs:{type:"number"},model:{value:e.rngInterface,callback:function(t){e.rngInterface=t},expression:"rngInterface"}})],1),r("v-flex",{staticClass:"parameter-description",attrs:{xs3:""}},[e._v("\n            Now, in epoch milliseconds\n        ")])],1)],1)},z=[],C=r("8654"),M={name:"Paramaterizer",components:{VTextField:C["a"]},props:{rngSeed:Number,linesBase:Number,colorPercentage:Number,redPercentage:Number,bluePercentage:Number,yellowPercentage:Number,mutedPercentage:Number},computed:{linesInterface:{get(){return this.linesBase},set(e){this.$emit("set-param",{property:"linesBase",value:e})}},colorInterface:{get(){return this.colorPercentage},set(e){this.$emit("set-param",{property:"colorPercentage",value:e})}},redInterface:{get(){return this.redPercentage},set(e){this.$emit("set-param",{property:"redPercentage",value:e})}},blueInterface:{get(){return this.bluePercentage},set(e){this.$emit("set-param",{property:"bluePercentage",value:e})}},yellowInterface:{get(){return this.yellowPercentage},set(e){this.$emit("set-param",{property:"yellowPercentage",value:e})}},mutedInterface:{get(){return this.mutedPercentage},set(e){this.$emit("set-param",{property:"mutedPercentage",value:e})}},rngInterface:{get(){return this.rngSeed},set(e){this.$emit("set-param",{property:"rngSeed",value:+e})}}}},$=M,k=(r("3ab9"),r("6544")),E=r.n(k),j=Object(b["a"])($,_,z,!1,null,"25021b04",null),I=j.exports;E()(j,{VContainer:i["a"],VFlex:l["a"],VLayout:o["a"],VSlider:c["a"],VTextField:h["a"]});var B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"description-title"},[e._v("\n    "+e._s(e.titleString)+"\n")]),r("div",{staticClass:"description-artist"},[e._v("\n    "+e._s(e.artistString)+"\n")]),r("div",{staticClass:"description-body"},[e._v("\n    "+e._s(e.descriptionString)+"\n")])])},N=[],O={name:"Paramaterizer",props:{description:void 0},computed:{titleString(){return this.description&&this.description.id?`Composition No. ${this.description.id}`:"Composition No. ?"},descriptionString(){try{let e=this.description.description.join(" and ");return`Generated in the vicinity of beautiful St Paul, Minnesota at ${this.description.time} under a ${this.description.lunar} moon. Atmospherically inspired by the temperature of ${this.description.temperature} degrees Fahrenheit, with ${e}.`}catch(e){return""}},artistString(){return this.description&&this.description.year?`Mondrianbot (${this.description.year})`:`Mondrianbot (${(new Date).getFullYear()})`}}},V=O,F=(r("b04f"),Object(b["a"])(V,B,N,!1,null,"05108aca",null)),L=F.exports,A=r("bc3a"),R=r.n(A);const D={min:0,max:100,base:25},T={min:0,max:100,base:25},W={min:0,max:100,base:25},q={min:0,max:100,base:20},U={min:1,max:15,base:6},Y={min:0,max:100,base:20},G=29.530588853,H=153905682e4,J=864e5,K="3b9df4c28659c77154536ead0411313c",Q=5045360;class X{constructor(){this.now=(new Date).valueOf()}async getParams(){if(this.weather=await this.getWeather(),null==this.weather)return{rngSeed:this.now,linesBase:U.base,colorPercentage:q.base,bluePercentage:D.base,yellowPercentage:W.base,redPercentage:T.base,description:{id:this.now}};this.getPrecipitations();const e=this.getBluePercentage(),t=this.getYellowPercentage(),r=this.getColorPercentage(),a=this.getRedPercentage(),n=this.getLinesBase();return{rngSeed:this.now,linesBase:n,colorPercentage:r,bluePercentage:e,yellowPercentage:t,redPercentage:a,description:this.getDescription()}}async getWeather(){const e="https://api.openweathermap.org/data/2.5/weather";try{const t=await R.a.get(`${e}?id=${Q}&APPID=${K}`);return t.data}catch(t){return null}}getLunarAge(){const e=(this.now-H)/J;return e%G}getPrecipitations(){const e=this.weather.weather.map(e=>e.id);this.isThunderstorm=e.some(e=>e>=200&&e<300),this.isDrizzle=e.some(e=>e>=300&&e<400),this.isRain=e.some(e=>e>=500&&e<600),this.isSnow=e.some(e=>e>=600&&e<700)}getBluePercentage(){let e=D.base;return this.isThunderstorm&&(e+=15),this.isDrizzle&&(e+=5),this.isRain&&(e+=10),this.isSnow&&(e+=5),e}getYellowPercentage(){let e=W.base;return this.weather.clouds&&this.weather.clouds.all&&(e*=1-this.weather.clouds.all/100),e}getRedPercentage(){let e=T.base;return this.weather.main&&this.weather.main.temp&&(e+=this.weather.main.temp-297,e=Math.max(3,e)),e}getColorPercentage(){let e=q.base;if(this.weather.snow&&this.weather.snow["3h"]){const t=this.weather.snow["3h"];e*=Math.max(0,1-t/3)}return e}getLinesBase(){const e=1-Math.abs(2*this.getLunarAge()/G-1);return Math.round((U.max-U.min)*e)}getDescription(){return{temperature:Math.round(this.kToF(this.weather.main.temp)),description:this.weather.weather.map(e=>e.description),lunar:this.getLunarPhase(this.getLunarAge()),year:new Date(this.now).getFullYear(),time:new Date(this.now).toLocaleTimeString(),id:this.now}}kToF(e){return 9*e/5-459.67}getLunarPhase(e){const t=.5;return e<t?"new":e<G/4-t?"waxing crescent":e<G/4+t?"first quarter":e<G/2-t?"waxing gibbous":e<G/2+t?"full":e<3*G/4-t?"waning gibbous":e<3*G/4+t?"third quarter":e<G-t?"waning crescent":"new"}}var Z={name:"App",components:{Mondrian:S,Parameterizer:I,Describer:L},data(){return{rngSeed:void 0,linesBase:void 0,colorPercentage:void 0,bluePercentage:void 0,redPercentage:void 0,yellowPercentage:void 0,mutedPercentage:void 0,description:void 0}},async mounted(){const e=new X;try{const t=await e.getParams();this.rngSeed=t.rngSeed,this.linesBase=t.linesBase,this.colorPercentage=t.colorPercentage,this.bluePercentage=t.bluePercentage,this.redPercentage=t.redPercentage,this.yellowPercentage=t.yellowPercentage,this.description=t.description}catch(t){this.rngSeed=(new Date).valueOf(),this.linesBase=U.base,this.colorPercentage=q.base,this.bluePercentage=D.base,this.redPercentage=T.base,this.yellowPercentage=W.base,this.mutedPercentage=Y.base,this.description={}}},methods:{setProperty(e){this[e.property]=e.value}}},ee=Z,te=(r("8dcb"),Object(b["a"])(ee,g,f,!1,null,"2ae38a1f",null)),re=te.exports;E()(te,{VApp:s["a"],VContainer:i["a"],VFlex:l["a"],VLayout:o["a"],VResponsive:d["a"]});var ae=r("9483");Object(ae["a"])("/mondrian/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,new a["a"]({render:e=>e(re)}).$mount("#app")},7690:function(e,t,r){"use strict";var a=r("cb96"),n=r.n(a);n.a},"8dcb":function(e,t,r){"use strict";var a=r("d654"),n=r.n(a);n.a},b04f:function(e,t,r){"use strict";var a=r("3fd6"),n=r.n(a);n.a},cb96:function(e,t,r){},d654:function(e,t,r){}});
//# sourceMappingURL=app.dca14d45.js.map